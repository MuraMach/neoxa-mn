# Neoxa Masternode Setup
This is a guide to setup a server for neoxa masternodes, it sets up a reasonably secure server with cockpit for management and podman for running containers

## Requirements for this setup
- Server running Rocky Linux 9.2 or Alma Linux 9.2 ( Tested on Rocky Linux ) 
- Whenever you see something like {parameter} in the commands you need to substitute it with an actual value for your case

#### Official requirements per node
- 2 vCPU
- 4GB Ram
- 80GB SSD

#### Trust me bro estimate:
- 1 Thread
- 2GB Ram
- 20GB SSD

## 1. After server is provisioned
Login with SSH or any other means, and switch to root user using

    sudo su

Download and execute the install.sh script, **Make sure to substitute {username} and {password} with real values, this user will be the one you use, make sure the password is very strong and preferably generated with a password manager**

    curl -sSL https://raw.githubusercontent.com/ctzoki/neoxa-mn/main/install.sh | bash -s {username} {password}
    
Server will reboot after installation is complete

![command](https://github.com/ctzoki/neoxa-mn/assets/129646348/c7c3a7f6-1ee8-4f8f-a85b-b3c093203dfa)

## 2. Welcome to your new server
Open the cockpit web ui using a browser, don't forget to substitute {ip-of-your-server} with your actual IP 

    https://{ip-of-your-server}:9090
    
![login](https://github.com/ctzoki/neoxa-mn/assets/129646348/26488999-0b70-4963-875c-2252c886eb97)

Click on Limited Access button on the top bar and enter your password again to enable administrative access for your session

![switch](https://github.com/ctzoki/neoxa-mn/assets/129646348/28c8845d-0daf-4438-979b-469077699b1d)
    
#### 2.1. Accounts setup
Head over to the Accounts menu
- There should be only 2 accounts, the username you provided to the installation script and root user
- If there are additional accounts, sometimes created by server providers, delete them
- Change the root password to a strong secure password generated by you

Before
![accounts-1](https://github.com/ctzoki/neoxa-mn/assets/129646348/b33a0890-e94a-424d-94a6-f308244f9b50)

After
![accounts-2](https://github.com/ctzoki/neoxa-mn/assets/129646348/06a2bf36-1cc5-4fea-8405-6b6dceade377)

#### 2.2. Enable metrics collection
Head over to the Overview menu, on the Usage Panel press "View metrics and history", enable the monitoring and collection services, do not enable "Export to network"

Before
![metrics-1](https://github.com/ctzoki/neoxa-mn/assets/129646348/0c89e60c-9c14-4652-90f0-82efeae78016)

Next Step
![metrics-2](https://github.com/ctzoki/neoxa-mn/assets/129646348/2e9c544e-c341-42b3-ba65-c1afe9872cb3)

It will take some time for data to start showing, check it again later

#### 2.3. Enable automatic updates
Head over to the Software Updates menu, install and enable the "Automatic updates" and "Kernel live patching"

Automatic Updates
![software-updates-1](https://github.com/ctzoki/neoxa-mn/assets/129646348/a4f9c6df-a31f-462d-8b92-dbe8ca10d9b5)

Enable automatic updates
![software-updates-2](https://github.com/ctzoki/neoxa-mn/assets/129646348/4b3ce296-f0db-49e0-af38-9ac3c691142e)

Enable kernel live patch
![software-updates-3](https://github.com/ctzoki/neoxa-mn/assets/129646348/e660f54f-dcfa-47d8-b238-9821ee920cd1)

Final state
![software-updates-4](https://github.com/ctzoki/neoxa-mn/assets/129646348/de55737d-c8e2-4c69-b7bd-fd42917bb782)

#### 2.4. Add additional IPs
Head over to the Networking menu, click on the main interface that is online, usually named eno1/eth1, click edit on the IPV4 settings, now a new popup will appear where you can enter all the additional IPs that you have for running masternodes

![network](https://github.com/ctzoki/neoxa-mn/assets/129646348/567ca22b-c752-4343-ba4e-f304ad975b7d)

#### 2.5. Enable Podman
Head over to the Podman menu, enable the podman service and enable starting on boot, here we will be starting all the nodes as described in the next section.

![podman](https://github.com/ctzoki/neoxa-mn/assets/129646348/1c33d31a-fb03-43de-bc75-1d8cab63dcb7)

## 3 Running MN Containers in Podman
-- Instructions will be updated during testnet --
